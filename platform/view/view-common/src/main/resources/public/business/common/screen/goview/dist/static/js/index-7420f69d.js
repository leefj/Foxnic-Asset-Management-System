var k=(t,e,n)=>new Promise((c,s)=>{var l=i=>{try{f(n.next(i))}catch(p){s(p)}},v=i=>{try{f(n.throw(i))}catch(p){s(p)}},f=i=>i.done?c(i.value):Promise.resolve(i.value).then(l,v);f((n=n.apply(t,e)).next())});import{M as G}from"./index-0ee20b5e.js";import{_ as M}from"./index-d5d828a2.js";import{u as U,P as V,f as x}from"./chartEditStore-45e1a76d.js";import{u as z,a as O}from"./chartLayoutStore-815e5862.js";import{I as Y,L as q,f as D,d as L,e as J,c as Q}from"./index-717da49f.js";import{cz as W,cA as T,cB as X,cC as Z,g as j,a as tt,cD as et,cE as at,cF as nt,cG as ot,d as st,l as rt,a0 as ct,L as lt,a9 as it,r as E,o as u,c as h,q as C,F as dt,s as ut,e as d,u as m,w as _,f as A,t as I,E as P,a5 as w,ao as _t,cH as ft,aD as pt,A as gt,B as ht,j as mt}from"./index-ccbc2f92.js";import{a as Ct,b as vt,l as yt,g as Et}from"./plugin-a694cf20.js";import{c as b}from"./index-76a67e82.js";import{i as bt}from"./icon-821d6910.js";import"./index-e0161c73.js";import"./SettingItem-abb1a26b.js";/* empty css                                                                      */import"./SettingItemBox-d2398725.js";import"./CollapseItem.vue_vue_type_script_setup_true_lang-08515eb0.js";import"./index.esm.min-ba907e3b.js";import"./http-2d25b213.js";import"./lodash-a46480a3.js";import"./fileTypeEnum-21359a08.js";function St(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var kt=St;function xt(t,e,n){var c=-1,s=t.length;e<0&&(e=-e>s?0:s+e),n=n>s?s:n,n<0&&(n+=s),s=e>n?0:n-e>>>0,e>>>=0;for(var l=Array(s);++c<s;)l[c]=t[c+e];return l}var Ot=xt,Dt=W,Lt=Ot;function At(t,e){return e.length<2?t:Dt(t,Lt(e,0,-1))}var It=At,Pt=T,wt=kt,Tt=It,$t=X;function Bt(t,e){return e=Pt(e,t),t=Tt(t,e),t==null||delete t[$t(wt(e))]}var Ft=Bt,Kt=Z;function Ht(t){return Kt(t)?void 0:t}var Nt=Ht,Rt=tt,Gt=ot,Mt=Ft,Ut=T,Vt=et,zt=Nt,Yt=at,qt=nt,Jt=1,Qt=2,Wt=4,Xt=Yt(function(t,e){var n={};if(t==null)return n;var c=!1;e=Rt(e,function(l){return l=Ut(l,t),c||(c=l.length>1),l}),Vt(t,qt(t),n),c&&(n=Gt(n,Jt|Qt|Wt,zt));for(var s=e.length;s--;)Mt(n,e[s]);return n}),Zt=Xt;const jt=j(Zt),te=t=>(gt("data-v-ded4749c"),t=t(),ht(),t),ee={class:"go-content-charts-item-animation-patch"},ae=["onDragstart","onDragend","onDblclick","onClick"],ne={class:"list-header"},oe={class:"list-center go-flex-center go-transition",draggable:"true"},se={class:"list-bottom"},re={key:0,class:"list-model"},ce=["onClick"],le=te(()=>C("span",null,"删除",-1)),ie=st({__name:"index",props:{menuOptions:{type:Array,default:()=>[]}},emits:["deletePhoto"],setup(t,{emit:e}){const n=U(),{TrashIcon:c}=bt.ionicons5,s=e,l=z(),v=rt(),f=a=>!a.disabled&&a.package===V.PHOTOS&&a.category===q.PRIVATE,i=ct(()=>l.getChartType),p=(a,o)=>{o.disabled||(b(o.chartKey,D(o)),b(o.conKey,L(o)),a.dataTransfer.setData(ft.DRAG_KEY,pt(jt(o,["image"]))),n.setEditCanvas(x.IS_CREATE,!0))},$=()=>{n.setEditCanvas(x.IS_CREATE,!1)},B=a=>k(this,null,function*(){if(!a.disabled)try{Ct(),b(a.chartKey,D(a)),b(a.conKey,L(a));let o=yield J(a);a.redirectComponent&&(a.dataset&&(o.option.dataset=a.dataset),o.chartConfig.title=a.title,o.chartConfig.chartFrame=a.chartFrame),n.addComponentList(o,!1,!0),n.setTargetSelectChart(o.id),vt()}catch(o){yt(),window.$message.warning("图表正在研发中, 敬请期待...")}}),F=a=>{var o;(o=a==null?void 0:a.configEvents)==null||o.addHandle(a)},K=(a,o)=>{Et({message:"是否删除此图片？",transformOrigin:"center",onPositiveCallback:()=>{const y=Q();s("deletePhoto",a,o),y.deletePhotos(a,o)}})};return lt(()=>i.value,a=>{a===O.DOUBLE&&it(()=>{v.value.classList.add("miniAnimation")})}),(a,o)=>{const y=E("n-ellipsis"),S=E("n-text"),H=E("n-icon"),N=E("n-button");return u(),h("div",ee,[C("div",{ref_key:"contentChartsItemBoxRef",ref:v,class:_t(["go-content-charts-item-box",[i.value===m(O).DOUBLE?"double":"single"]])},[(u(!0),h(dt,null,ut(t.menuOptions,(r,R)=>(u(),h("div",{class:"item-box",key:r.title,draggable:"",onDragstart:g=>!r.disabled&&p(g,r),onDragend:g=>!r.disabled&&$,onDblclick:g=>B(r),onClick:g=>F(r)},[C("div",ne,[d(m(G),{class:"list-header-control-btn",mini:!0,disabled:!0}),d(S,{class:"list-header-text",depth:"3"},{default:_(()=>[d(y,null,{default:_(()=>[A(I(r.title),1)]),_:2},1024)]),_:2},1024)]),C("div",oe,[r.icon?(u(),P(m(Y),{key:0,class:"list-img",icon:r.icon,color:"#999",width:"48"},null,8,["icon"])):(u(),P(m(M),{key:1,class:"list-img",chartConfig:r},null,8,["chartConfig"]))]),C("div",se,[d(S,{class:"list-bottom-text",depth:"3"},{default:_(()=>[d(y,{style:{"max-width":"90%"}},{default:_(()=>[A(I(r.title),1)]),_:2},1024)]),_:2},1024)]),r.disabled?(u(),h("div",re)):w("",!0),f(r)?(u(),h("div",{key:1,class:"list-tools go-transition",onClick:g=>K(r,R)},[d(N,{text:"",type:"default",color:"#ffffff"},{icon:_(()=>[d(H,null,{default:_(()=>[d(m(c))]),_:1})]),default:_(()=>[le]),_:1})],8,ce)):w("",!0)],40,ae))),128))],2)])}}});const Ae=mt(ie,[["__scopeId","data-v-ded4749c"]]);export{Ae as default};
