var D=(f,E,g)=>new Promise((S,h)=>{var I=r=>{try{o(g.next(r))}catch(p){h(p)}},c=r=>{try{o(g.throw(r))}catch(p){h(p)}},o=r=>r.done?S(r.value):Promise.resolve(r.value).then(I,c);o((g=g.apply(f,E)).next())});import{d as ue,j as O,a7 as _e,aw as y,J as pe,r as s,o as u,c as k,e,w as t,u as a,q as b,a2 as G,O as me,f as _,t as U,cj as R,Q as fe,D as w,cN as ge,F as V,s as $,E as F,a6 as ve,cO as Ce,z as be,A as he,h as ye}from"./index-c6cc3b14.js";import{F as P}from"./fileTypeEnum-21359a08.js";import{u as ke,E as m}from"./chartEditStore-3ee495ca.js";/* empty css                                                                       */import{l as we}from"./index-af8cb105.js";import{i as H}from"./icon-8314374d.js";import{_ as Ee}from"./StylesSetting.vue_vue_type_script_setup_true_lang-d13d0eca.js";import"./plugin-0dcb0bd6.js";import"./SettingItem-ec2fd044.js";import"./SettingItemBox-cf908047.js";import"./CollapseItem.vue_vue_type_script_setup_true_lang-81d1b4a3.js";const Se="/static/png/noImage.png",Ie=f=>(be("data-v-bcb3ba8f"),f=f(),he(),f),ze={class:"go-canvas-setting"},Le={class:"upload-box"},Te=["src"],xe={class:"upload-img"},Oe=Ie(()=>b("img",{src:Se},null,-1)),Ue={class:"picker-height"},Re=ue({__name:"index",setup(f){const{ColorPaletteIcon:E}=H.ionicons5,{ScaleIcon:g,FitToScreenIcon:S,FitToHeightIcon:h,FitToWidthIcon:I}=H.carbon,c=ke(),o=c.getEditCanvasConfig,r=c.getEditCanvas,p=O(),z=O(!1),L=O(0),Y=we(()=>_e(()=>import("./index-74af5759.js"),["static/js/index-74af5759.js","static/js/index-c6cc3b14.js","static/css/index-9c2eb289.css","static/js/chartEditStore-3ee495ca.js","static/js/plugin-0dcb0bd6.js","static/js/icon-8314374d.js","static/js/index-af8cb105.js","static/css/index-83eadabc.css","static/css/index-39f06c17.css"])),M=[{label:"应用颜色",value:0},{label:"应用背景",value:1}],X=[{key:"ChartTheme",title:"主题颜色",icon:E,render:Y}],j=[{key:y.FIT,title:"自适应",icon:g,desc:"自适应比例展示，页面会有留白"},{key:y.SCROLL_Y,title:"Y轴滚动",icon:I,desc:"X轴铺满，Y轴自适应滚动"},{key:y.SCROLL_X,title:"X轴滚动",icon:h,desc:"Y轴铺满，X轴自适应滚动"},{key:y.FULL,title:"铺满",icon:S,desc:"强行拉伸画面，填充所有视图"}];pe(()=>o.selectColor,l=>{L.value=l?0:1},{immediate:!0});const A=l=>l>50,N=()=>{c.computedScale()},K=i=>D(this,[i],function*({file:l}){p.value=[];const d=l.file.type;return l.file.size>1024*1024*R?(window.$message.warning(`图片超出 ${R}M 限制，请重新上传！`),!1):d!==P.PNG&&d!==P.JPEG&&d!==P.GIF?(window.$message.warning("文件格式不符合，请重新上传！"),!1):!0}),q=l=>{o.selectColor=l==0},J=()=>{c.setEditCanvasConfig(m.BACKGROUND_IMAGE,void 0),c.setEditCanvasConfig(m.SELECT_COLOR,!0)},W=()=>{z.value=!0,setTimeout(()=>{z.value=!1})},Q=()=>{c.setEditCanvasConfig(m.BACKGROUND,void 0),o.backgroundImage&&c.setEditCanvasConfig(m.SELECT_COLOR,!1),W()},Z=l=>{const{file:i}=l;ve(()=>{if(i.file){const d=Ce(i.file);c.setEditCanvasConfig(m.BACKGROUND_IMAGE,d),c.setEditCanvasConfig(m.SELECT_COLOR,!1)}else window.$message.error("添加图片失败，请稍后重试！")})},ee=l=>{c.setEditCanvasConfig(m.PREVIEW_SCALE_TYPE,l)};return(l,i)=>{const d=s("n-input-number"),T=s("n-form-item"),te=s("n-form"),C=s("n-text"),oe=s("n-upload-dragger"),ne=s("n-upload"),ae=s("n-color-picker"),v=s("n-space"),se=s("n-select"),x=s("n-button"),B=s("n-icon"),le=s("n-tooltip"),ie=s("n-button-group"),ce=s("n-divider"),re=s("n-tab-pane"),de=s("n-tabs");return u(),k("div",ze,[e(te,{inline:"","label-width":45,size:"small","label-placement":"left"},{default:t(()=>[e(T,{label:"宽度"},{default:t(()=>[e(d,{size:"small",value:a(o).width,"onUpdate:value":[i[0]||(i[0]=n=>a(o).width=n),N],disabled:a(r).lockScale,validator:A},null,8,["value","disabled"])]),_:1}),e(T,{label:"高度"},{default:t(()=>[e(d,{size:"small",value:a(o).height,"onUpdate:value":[i[1]||(i[1]=n=>a(o).height=n),N],disabled:a(r).lockScale,validator:A},null,8,["value","disabled"])]),_:1})]),_:1}),b("div",Le,[e(ne,{"file-list":p.value,"onUpdate:fileList":i[2]||(i[2]=n=>p.value=n),"show-file-list":!1,customRequest:Z,onBeforeUpload:K},{default:t(()=>[e(oe,null,{default:t(()=>[a(o).backgroundImage?(u(),k("img",{key:0,class:"upload-show",src:a(o).backgroundImage,alt:"背景"},null,8,Te)):G("",!0),me(b("div",xe,[Oe,e(C,{class:"upload-desc",depth:"3"},{default:t(()=>[_(" 背景图需小于 "+U(a(R))+"M ，格式为 png/jpg/gif 的文件 ",1)]),_:1})],512),[[fe,!a(o).backgroundImage]])]),_:1})]),_:1},8,["file-list"])]),e(v,{vertical:"",size:12},{default:t(()=>[e(v,null,{default:t(()=>[e(C,null,{default:t(()=>[_("背景颜色")]),_:1}),b("div",Ue,[z.value?G("",!0):(u(),w(ae,{key:0,size:"small",style:{width:"250px"},value:a(o).background,"onUpdate:value":i[3]||(i[3]=n=>a(o).background=n),showPreview:!0,swatches:a(ge)},null,8,["value","swatches"]))])]),_:1}),e(v,null,{default:t(()=>[e(C,null,{default:t(()=>[_("应用类型")]),_:1}),e(se,{size:"small",style:{width:"250px"},value:L.value,"onUpdate:value":[i[4]||(i[4]=n=>L.value=n),q],disabled:!a(o).backgroundImage,options:M},null,8,["value","disabled"])]),_:1}),e(v,null,{default:t(()=>[e(C,null,{default:t(()=>[_("背景控制")]),_:1}),e(x,{class:"clear-btn",size:"small",disabled:!a(o).backgroundImage,onClick:J},{default:t(()=>[_(" 清除背景 ")]),_:1},8,["disabled"]),e(x,{class:"clear-btn",size:"small",disabled:!a(o).background,onClick:Q},{default:t(()=>[_(" 清除颜色 ")]),_:1},8,["disabled"])]),_:1}),e(v,null,{default:t(()=>[e(C,null,{default:t(()=>[_("适配方式")]),_:1}),e(ie,null,{default:t(()=>[(u(),k(V,null,$(j,n=>e(x,{key:n.key,type:a(o).previewScaleType===n.key?"primary":"tertiary",ghost:"",size:"small",onClick:Fe=>ee(n.key)},{default:t(()=>[e(le,{"show-arrow":!1,trigger:"hover"},{trigger:t(()=>[e(B,{class:"select-preview-icon",size:"18"},{default:t(()=>[(u(),w(F(n.icon)))]),_:2},1024)]),default:t(()=>[_(" "+U(n.desc),1)]),_:2},1024)]),_:2},1032,["type","onClick"])),64))]),_:1})]),_:1})]),_:1}),e(a(Ee),{isCanvas:!0,chartStyles:a(o)},null,8,["chartStyles"]),e(ce,{style:{margin:"10px 0"}}),e(de,{class:"tabs-box",size:"small",type:"segment"},{default:t(()=>[(u(),k(V,null,$(X,n=>e(re,{key:n.key,name:n.key,size:"small","display-directive":"show:lazy"},{tab:t(()=>[e(v,null,{default:t(()=>[b("span",null,U(n.title),1),e(B,{size:"16",class:"icon-position"},{default:t(()=>[(u(),w(F(n.icon)))]),_:2},1024)]),_:2},1024)]),default:t(()=>[(u(),w(F(n.render)))]),_:2},1032,["name"])),64))]),_:1})])}}});const je=ye(Re,[["__scopeId","data-v-bcb3ba8f"]]);export{je as default};
