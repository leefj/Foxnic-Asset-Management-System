var G=Object.defineProperty;var h=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var E=(a,t,o)=>t in a?G(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o,l=(a,t)=>{for(var o in t||(t={}))L.call(t,o)&&E(a,o,t[o]);if(h)for(var o of h(t))B.call(t,o)&&E(a,o,t[o]);return a};import{d as D,B as H,Y as k,r as T,o as _,D as f,w as g,c as N,F as P,s as b,E as $,q as j,t as F,U as I,M,aZ as V,a_ as C,S as d,az as S,N as q,aA as z,a$ as J,h as U}from"./index-c6cc3b14.js";import{i as W}from"./icon-8314374d.js";import{u as Y}from"./chartEditStore-3ee495ca.js";import{s as Z}from"./useSyncUpdate.hook-402738a1.js";import{l as K}from"./lodash-c32566df.js";import"./plugin-0dcb0bd6.js";import"./chartLayoutStore-fa484834.js";import"./index-68969097.js";import"./SettingItem-ec2fd044.js";/* empty css                                                                       */import"./SettingItemBox-cf908047.js";import"./CollapseItem.vue_vue_type_script_setup_true_lang-81d1b4a3.js";import"./index.esm.min-4d91f069.js";import"./http-abbaebe7.js";import"./fileTypeEnum-21359a08.js";const Q=D({__name:"index",setup(a){const{BrowsersOutlineIcon:t,SendIcon:o,AnalyticsIcon:A}=W.ionicons5,m=Y(),v=H(),x=()=>{const s=M(V.CHART_PREVIEW_NAME,"href");if(!s)return;const{id:r}=v.params,n=typeof r=="string"?r:r[0],c=m.getStorageInfo,e=C(d.GO_CHART_STORAGE_LIST)||[];if(e!=null&&e.length){const i=e.findIndex(p=>p.id===n);i!==-1?(e.splice(i,1,l({id:n},c)),S(d.GO_CHART_STORAGE_LIST,e)):(e.push(l({id:n},c)),S(d.GO_CHART_STORAGE_LIST,e))}else S(d.GO_CHART_STORAGE_LIST,[l({id:n},c)]);q(s,[n],void 0,!0)},R=()=>{const{id:s}=v.params,r=typeof s=="string"?s:s[0];console.log("previewId:",r);const n=m.getStorageInfo,c=C(d.GO_CHART_STORAGE_LIST)||[];var e=[l({id:r},n)];console.log("storageInfo2",e),console.log("sessionStorageInfo",c);var i=z(e);console.log(i);var p={id:"",jsonData:"[]"};p.id=r,p.jsonData=i,J.post("/service-common/sys-screen/update",p).then(function(u){var O=u.data;if(O.success)try{window.$message.success("保存成功")}catch(X){}else window.$message.error("保存失败")}).catch(u=>{console.log(u)})},y=[{select:!0,title:"同步内容",type:"primary",icon:I(A),event:Z},{select:!0,title:"预览",icon:I(t),event:x},{select:!0,title:"保存",icon:I(o),event:R}],w=k(()=>{if(m.getEditCanvas.isCodeEdit)return y;const s=K.cloneDeep(y);return s.shift(),s});return(s,r)=>{const n=T("n-button"),c=T("n-space");return _(),f(c,{class:"go-mt-0"},{default:g(()=>[(_(!0),N(P,null,b(w.value,e=>(_(),f(n,{key:e.title,type:e.type,ghost:"",onClick:e.event},{icon:g(()=>[(_(),f($(e.icon)))]),default:g(()=>[j("span",null,F(e.title),1)]),_:2},1032,["type","onClick"]))),128))]),_:1})}}});const ge=U(Q,[["__scopeId","data-v-78354da5"]]);export{ge as default};
