var k=(t,e,n)=>new Promise((l,s)=>{var c=i=>{try{f(n.next(i))}catch(p){s(p)}},b=i=>{try{f(n.throw(i))}catch(p){s(p)}},f=i=>i.done?l(i.value):Promise.resolve(i.value).then(c,b);f((n=n.apply(t,e)).next())});import{M as R}from"./index-f4e49057.js";import{_ as G}from"./index-6ba64390.js";import{u as M,P as U,f as x}from"./chartEditStore-45e70a9f.js";import{u as V,a as O}from"./chartLayoutStore-b1ae0ff3.js";import{I as z,y as Y,f as D,d as L,e as q,c as J}from"./index-81daa372.js";import{cz as Q,cA as T,cB as W,cC as X,g as Z,a as j,cD as tt,cE as et,cF as at,cG as nt,d as ot,l as st,a0 as rt,L as ct,a9 as lt,r as y,o as u,c as h,q as C,F as it,s as dt,e as d,u as m,w as _,f as A,t as I,E as P,a5 as w,ap as ut,cH as _t,aD as ft,A as pt,B as gt,j as ht}from"./index-232a8936.js";import{a as mt,b as Ct,l as vt,g as yt}from"./plugin-0e60a394.js";import{c as E}from"./index-6fa0c8b2.js";import{i as Et}from"./icon-b66964c1.js";import"./index-93bcd10b.js";import"./SettingItem-2752cac5.js";/* empty css                                                                       */import"./SettingItemBox-ba5c9333.js";import"./CollapseItem.vue_vue_type_script_setup_true_lang-bbd36025.js";import"./index.esm.min-94a18cbf.js";import"./http-e7ed94fe.js";import"./lodash-b5580029.js";import"./fileTypeEnum-21359a08.js";function bt(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var St=bt;function kt(t,e,n){var l=-1,s=t.length;e<0&&(e=-e>s?0:s+e),n=n>s?s:n,n<0&&(n+=s),s=e>n?0:n-e>>>0,e>>>=0;for(var c=Array(s);++l<s;)c[l]=t[l+e];return c}var xt=kt,Ot=Q,Dt=xt;function Lt(t,e){return e.length<2?t:Ot(t,Dt(e,0,-1))}var At=Lt,It=T,Pt=St,wt=At,Tt=W;function $t(t,e){return e=It(e,t),t=wt(t,e),t==null||delete t[Tt(Pt(e))]}var Bt=$t,Ft=X;function Kt(t){return Ft(t)?void 0:t}var Ht=Kt,Nt=j,Rt=nt,Gt=Bt,Mt=T,Ut=tt,Vt=Ht,zt=et,Yt=at,qt=1,Jt=2,Qt=4,Wt=zt(function(t,e){var n={};if(t==null)return n;var l=!1;e=Nt(e,function(c){return c=Mt(c,t),l||(l=c.length>1),c}),Ut(t,Yt(t),n),l&&(n=Rt(n,qt|Jt|Qt,Vt));for(var s=e.length;s--;)Gt(n,e[s]);return n}),Xt=Wt;const Zt=Z(Xt),jt=t=>(pt("data-v-ded4749c"),t=t(),gt(),t),te={class:"go-content-charts-item-animation-patch"},ee=["onDragstart","onDragend","onDblclick","onClick"],ae={class:"list-header"},ne={class:"list-center go-flex-center go-transition",draggable:"true"},oe={class:"list-bottom"},se={key:0,class:"list-model"},re=["onClick"],ce=jt(()=>C("span",null,"删除",-1)),le=ot({__name:"index",props:{menuOptions:{type:Array,default:()=>[]}},emits:["deletePhoto"],setup(t,{emit:e}){const n=M(),{TrashIcon:l}=Et.ionicons5,s=V(),c=st(),b=a=>!a.disabled&&a.package===U.PHOTOS&&a.category===Y.PRIVATE,f=rt(()=>s.getChartType),i=(a,o)=>{o.disabled||(E(o.chartKey,D(o)),E(o.conKey,L(o)),a.dataTransfer.setData(_t.DRAG_KEY,ft(Zt(o,["image"]))),n.setEditCanvas(x.IS_CREATE,!0))},p=()=>{n.setEditCanvas(x.IS_CREATE,!1)},$=a=>k(this,null,function*(){if(!a.disabled)try{mt(),E(a.chartKey,D(a)),E(a.conKey,L(a));let o=yield q(a);a.redirectComponent&&(a.dataset&&(o.option.dataset=a.dataset),o.chartConfig.title=a.title,o.chartConfig.chartFrame=a.chartFrame),n.addComponentList(o,!1,!0),n.setTargetSelectChart(o.id),Ct()}catch(o){vt(),window.$message.warning("图表正在研发中, 敬请期待...")}}),B=a=>{var o;(o=a==null?void 0:a.configEvents)==null||o.addHandle(a)},F=(a,o)=>{yt({message:"是否删除此图片？",transformOrigin:"center",onPositiveCallback:()=>{const v=J();e("deletePhoto",a,o),v.deletePhotos(a,o)}})};return ct(()=>f.value,a=>{a===O.DOUBLE&&lt(()=>{c.value.classList.add("miniAnimation")})}),(a,o)=>{const v=y("n-ellipsis"),S=y("n-text"),K=y("n-icon"),H=y("n-button");return u(),h("div",te,[C("div",{ref_key:"contentChartsItemBoxRef",ref:c,class:ut(["go-content-charts-item-box",[f.value===m(O).DOUBLE?"double":"single"]])},[(u(!0),h(it,null,dt(t.menuOptions,(r,N)=>(u(),h("div",{class:"item-box",key:r.title,draggable:"",onDragstart:g=>!r.disabled&&i(g,r),onDragend:g=>!r.disabled&&p,onDblclick:g=>$(r),onClick:g=>B(r)},[C("div",ae,[d(m(R),{class:"list-header-control-btn",mini:!0,disabled:!0}),d(S,{class:"list-header-text",depth:"3"},{default:_(()=>[d(v,null,{default:_(()=>[A(I(r.title),1)]),_:2},1024)]),_:2},1024)]),C("div",ne,[r.icon?(u(),P(m(z),{key:0,class:"list-img",icon:r.icon,color:"#999",width:"48"},null,8,["icon"])):(u(),P(m(G),{key:1,class:"list-img",chartConfig:r},null,8,["chartConfig"]))]),C("div",oe,[d(S,{class:"list-bottom-text",depth:"3"},{default:_(()=>[d(v,{style:{"max-width":"90%"}},{default:_(()=>[A(I(r.title),1)]),_:2},1024)]),_:2},1024)]),r.disabled?(u(),h("div",se)):w("",!0),b(r)?(u(),h("div",{key:1,class:"list-tools go-transition",onClick:g=>F(r,N)},[d(H,{text:"",type:"default",color:"#ffffff"},{icon:_(()=>[d(K,null,{default:_(()=>[d(m(l))]),_:1})]),default:_(()=>[ce]),_:1})],8,re)):w("",!0)],40,ee))),128))],2)])}}});const Le=ht(le,[["__scopeId","data-v-ded4749c"]]);export{Le as default};
