var k=(t,e,n)=>new Promise((l,s)=>{var c=i=>{try{f(n.next(i))}catch(p){s(p)}},E=i=>{try{f(n.throw(i))}catch(p){s(p)}},f=i=>i.done?l(i.value):Promise.resolve(i.value).then(c,E);f((n=n.apply(t,e)).next())});import{M as H}from"./index-1ec7cb3e.js";import{_ as M}from"./index-679ce858.js";import{u as G,P as U,f as x}from"./chartEditStore-3ee495ca.js";import{u as V,a as O}from"./chartLayoutStore-fa484834.js";import{I as z,y as Y,f as D,d as A,e as J,c as q}from"./index-68969097.js";import{cx as Q,cy as T,cz as W,cA as X,g as Z,a as j,cB as tt,cC as et,cD as at,cE as nt,d as ot,j as st,Y as rt,J as ct,a6 as lt,r as y,o as u,c as h,q as C,F as it,s as dt,e as d,u as m,w as _,f as I,t as L,D as P,a2 as w,am as ut,cF as _t,aA as ft,z as pt,A as gt,h as ht}from"./index-c6cc3b14.js";import{a as mt,b as Ct,l as vt,g as yt}from"./plugin-0dcb0bd6.js";import{c as b}from"./index-af8cb105.js";import{i as bt}from"./icon-8314374d.js";import"./index-6d528f21.js";import"./SettingItem-ec2fd044.js";/* empty css                                                                       */import"./SettingItemBox-cf908047.js";import"./CollapseItem.vue_vue_type_script_setup_true_lang-81d1b4a3.js";import"./index.esm.min-4d91f069.js";import"./http-abbaebe7.js";import"./lodash-c32566df.js";import"./fileTypeEnum-21359a08.js";function Et(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var St=Et;function kt(t,e,n){var l=-1,s=t.length;e<0&&(e=-e>s?0:s+e),n=n>s?s:n,n<0&&(n+=s),s=e>n?0:n-e>>>0,e>>>=0;for(var c=Array(s);++l<s;)c[l]=t[l+e];return c}var xt=kt,Ot=Q,Dt=xt;function At(t,e){return e.length<2?t:Ot(t,Dt(e,0,-1))}var It=At,Lt=T,Pt=St,wt=It,Tt=W;function $t(t,e){return e=Lt(e,t),t=wt(t,e),t==null||delete t[Tt(Pt(e))]}var Bt=$t,Ft=X;function Kt(t){return Ft(t)?void 0:t}var Nt=Kt,Rt=j,Ht=nt,Mt=Bt,Gt=T,Ut=tt,Vt=Nt,zt=et,Yt=at,Jt=1,qt=2,Qt=4,Wt=zt(function(t,e){var n={};if(t==null)return n;var l=!1;e=Rt(e,function(c){return c=Gt(c,t),l||(l=c.length>1),c}),Ut(t,Yt(t),n),l&&(n=Ht(n,Jt|qt|Qt,Vt));for(var s=e.length;s--;)Mt(n,e[s]);return n}),Xt=Wt;const Zt=Z(Xt),jt=t=>(pt("data-v-ded4749c"),t=t(),gt(),t),te={class:"go-content-charts-item-animation-patch"},ee=["onDragstart","onDragend","onDblclick","onClick"],ae={class:"list-header"},ne={class:"list-center go-flex-center go-transition",draggable:"true"},oe={class:"list-bottom"},se={key:0,class:"list-model"},re=["onClick"],ce=jt(()=>C("span",null,"删除",-1)),le=ot({__name:"index",props:{menuOptions:{type:Array,default:()=>[]}},emits:["deletePhoto"],setup(t,{emit:e}){const n=G(),{TrashIcon:l}=bt.ionicons5,s=V(),c=st(),E=a=>!a.disabled&&a.package===U.PHOTOS&&a.category===Y.PRIVATE,f=rt(()=>s.getChartType),i=(a,o)=>{o.disabled||(b(o.chartKey,D(o)),b(o.conKey,A(o)),a.dataTransfer.setData(_t.DRAG_KEY,ft(Zt(o,["image"]))),n.setEditCanvas(x.IS_CREATE,!0))},p=()=>{n.setEditCanvas(x.IS_CREATE,!1)},$=a=>k(this,null,function*(){if(!a.disabled)try{mt(),b(a.chartKey,D(a)),b(a.conKey,A(a));let o=yield J(a);a.redirectComponent&&(a.dataset&&(o.option.dataset=a.dataset),o.chartConfig.title=a.title,o.chartConfig.chartFrame=a.chartFrame),n.addComponentList(o,!1,!0),n.setTargetSelectChart(o.id),Ct()}catch(o){vt(),window.$message.warning("图表正在研发中, 敬请期待...")}}),B=a=>{var o;(o=a==null?void 0:a.configEvents)==null||o.addHandle(a)},F=(a,o)=>{yt({message:"是否删除此图片？",transformOrigin:"center",onPositiveCallback:()=>{const v=q();e("deletePhoto",a,o),v.deletePhotos(a,o)}})};return ct(()=>f.value,a=>{a===O.DOUBLE&&lt(()=>{c.value.classList.add("miniAnimation")})}),(a,o)=>{const v=y("n-ellipsis"),S=y("n-text"),K=y("n-icon"),N=y("n-button");return u(),h("div",te,[C("div",{ref_key:"contentChartsItemBoxRef",ref:c,class:ut(["go-content-charts-item-box",[f.value===m(O).DOUBLE?"double":"single"]])},[(u(!0),h(it,null,dt(t.menuOptions,(r,R)=>(u(),h("div",{class:"item-box",key:r.title,draggable:"",onDragstart:g=>!r.disabled&&i(g,r),onDragend:g=>!r.disabled&&p,onDblclick:g=>$(r),onClick:g=>B(r)},[C("div",ae,[d(m(H),{class:"list-header-control-btn",mini:!0,disabled:!0}),d(S,{class:"list-header-text",depth:"3"},{default:_(()=>[d(v,null,{default:_(()=>[I(L(r.title),1)]),_:2},1024)]),_:2},1024)]),C("div",ne,[r.icon?(u(),P(m(z),{key:0,class:"list-img",icon:r.icon,color:"#999",width:"48"},null,8,["icon"])):(u(),P(m(M),{key:1,class:"list-img",chartConfig:r},null,8,["chartConfig"]))]),C("div",oe,[d(S,{class:"list-bottom-text",depth:"3"},{default:_(()=>[d(v,{style:{"max-width":"90%"}},{default:_(()=>[I(L(r.title),1)]),_:2},1024)]),_:2},1024)]),r.disabled?(u(),h("div",se)):w("",!0),E(r)?(u(),h("div",{key:1,class:"list-tools go-transition",onClick:g=>F(r,R)},[d(N,{text:"",type:"default",color:"#ffffff"},{icon:_(()=>[d(K,null,{default:_(()=>[d(m(l))]),_:1})]),default:_(()=>[ce]),_:1})],8,re)):w("",!0)],40,ee))),128))],2)])}}});const Ae=ht(le,[["__scopeId","data-v-ded4749c"]]);export{Ae as default};
